<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Inline Estimate Flow - Customer Page</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * { box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f8fafc; margin: 0; color: #1e293b; }
    .card { background: white; border: 1px solid #e2e8f0; border-radius: 0.75rem; }
    .card-pad { padding: 1rem 1.25rem; }
    .fi { display: flex; align-items: center; justify-content: space-between; padding: 0.4rem 0; font-size: 0.8125rem; }
    .fi-label { color: #64748b; font-weight: 500; }
    .fi select { border: none; background: none; color: #2563eb; font-size: 0.8125rem; font-weight: 500; cursor: pointer; text-align: right; }
    .btn-sm { font-size: 0.75rem; font-weight: 500; padding: 0.375rem 0.75rem; border-radius: 0.375rem; cursor: pointer; display: inline-flex; align-items: center; gap: 0.375rem; transition: all 0.15s; }
    .btn-green { background: #16a34a; color: white; border: none; }
    .btn-green:hover { background: #15803d; }
    .ico-btn { width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; border: 1px solid #e2e8f0; border-radius: 0.5rem; background: white; cursor: pointer; }
    .ico-btn:hover { background: #f1f5f9; }
    .sdot { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; }
    .total-bar { background: #1e40af; color: white; border-radius: 0 0 0.75rem 0.75rem; padding: 0.75rem 1.25rem; margin-top: -1px; }
    .pr { display: flex; justify-content: space-between; padding: 0.375rem 0; font-size: 0.8125rem; }
    .pr a { color: #2563eb; text-decoration: none; }
    .pr .dash { color: #cbd5e1; }
    .tabs-main { display: flex; gap: 0; border-bottom: 2px solid #e2e8f0; overflow-x: auto; }
    .tab-main { padding: 0.75rem 1.25rem; font-size: 0.875rem; font-weight: 500; cursor: pointer; color: #94a3b8; border-bottom: 2px solid transparent; margin-bottom: -2px; white-space: nowrap; display: flex; align-items: center; gap: 0.5rem; }
    .tab-main.on { color: #2563eb; border-bottom-color: #2563eb; }
    .tabs-notes { display: flex; gap: 0; border-bottom: 1px solid #e2e8f0; }
    .tab-note { padding: 0.625rem 1rem; font-size: 0.8125rem; font-weight: 500; cursor: pointer; color: #94a3b8; border-bottom: 2px solid transparent; margin-bottom: -1px; }
    .tab-note.on { color: #1e293b; border-bottom-color: #1e293b; }
    .fade-in { animation: fadeIn 0.25s ease; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
    @media (max-width: 1024px) {
      .layout-3 { grid-template-columns: 1fr !important; }
    }
  </style>
</head>
<body>

  <!-- ===== CUSTOMER PAGE HEADER (always visible) ===== -->
  <div style="background:white;border-bottom:1px solid #e2e8f0;">
    <div style="max-width:1400px;margin:0 auto;padding:1rem 1.5rem;">
      <div class="flex items-center gap-3 mb-1">
        <a href="#" style="color:#64748b;font-size:0.8125rem;text-decoration:none;">&larr; Back to My Leads</a>
      </div>
      <div class="flex flex-wrap items-center justify-between gap-3 mb-2">
        <div class="flex items-center gap-3">
          <div style="width:44px;height:44px;border-radius:50%;background:#2563eb;color:white;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.125rem;">J</div>
          <div>
            <div class="flex items-center gap-2">
              <h1 style="font-size:1.25rem;font-weight:700;margin:0;">John</h1>
              <span style="font-size:0.6875rem;background:#dbeafe;color:#2563eb;padding:2px 8px;border-radius:9999px;font-weight:600;">Lead</span>
            </div>
            <div style="font-size:0.75rem;color:#64748b;display:flex;gap:1rem;">
              <span>6029030482</span>
              <span>teachout05@gmail.com</span>
            </div>
          </div>
        </div>
        <div class="flex items-center gap-2 flex-wrap">
          <button class="btn-sm" style="background:white;border:1px solid #e2e8f0;color:#475569;">Invite to Portal</button>
          <button class="btn-sm" style="background:white;border:1px solid #e2e8f0;color:#475569;">Consultation</button>
          <button class="btn-sm" style="background:white;border:1px solid #e2e8f0;color:#475569;">Preview Portal</button>
          <button class="btn-sm" style="background:white;border:1px solid #e2e8f0;color:#475569;">Edit</button>
          <button class="btn-sm" style="background:#2563eb;color:white;border:none;font-weight:600;">+New Job</button>
        </div>
      </div>

      <!-- Customer Tabs -->
      <div class="tabs-main">
        <div class="tab-main">Overview</div>
        <div class="tab-main">Sales</div>
        <div class="tab-main on" onclick="showView('list')">Estimates</div>
        <div class="tab-main">Jobs</div>
        <div class="tab-main">Invoices</div>
        <div class="tab-main">Files</div>
        <div class="tab-main">Notes</div>
      </div>
    </div>
  </div>

  <!-- ===== TAB CONTENT AREA ===== -->
  <div style="max-width:1400px;margin:0 auto;padding:1.5rem;">

    <!-- ==================== -->
    <!-- VIEW 1: ESTIMATE LIST -->
    <!-- ==================== -->
    <div id="view-list" class="fade-in">

      <!-- Header -->
      <div class="flex flex-wrap items-center justify-between gap-3 mb-6">
        <div>
          <h2 style="font-size:1.125rem;font-weight:600;margin:0;">Estimates</h2>
          <p style="font-size:0.8125rem;color:#64748b;margin:0.25rem 0 0;">2 total estimates</p>
        </div>
        <button class="btn-sm" style="background:#2563eb;color:white;border:none;font-weight:600;padding:0.5rem 1rem;">+ Create Estimate</button>
      </div>

      <!-- Stats -->
      <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:1rem;margin-bottom:1.5rem;">
        <div class="card card-pad">
          <div style="font-size:0.8125rem;color:#64748b;">Total Estimates</div>
          <div style="font-size:1.5rem;font-weight:700;">2</div>
        </div>
        <div class="card card-pad">
          <div style="font-size:0.8125rem;color:#64748b;">Pending</div>
          <div style="font-size:1.5rem;font-weight:700;color:#d97706;">1</div>
        </div>
        <div class="card card-pad">
          <div style="font-size:0.8125rem;color:#64748b;">Approved Value</div>
          <div style="font-size:1.5rem;font-weight:700;color:#16a34a;">$850.00</div>
        </div>
        <div class="card card-pad">
          <div style="font-size:0.8125rem;color:#64748b;">Conversion Rate</div>
          <div style="font-size:1.5rem;font-weight:700;">50%</div>
        </div>
      </div>

      <!-- Filters -->
      <div style="display:flex;gap:0.5rem;margin-bottom:1rem;">
        <button class="btn-sm" style="background:#1e293b;color:white;border:none;">All (2)</button>
        <button class="btn-sm" style="background:white;color:#475569;border:1px solid #e2e8f0;">Pending (1)</button>
        <button class="btn-sm" style="background:white;color:#475569;border:1px solid #e2e8f0;">Approved (1)</button>
        <button class="btn-sm" style="background:white;color:#475569;border:1px solid #e2e8f0;">Declined (0)</button>
      </div>

      <!-- Table -->
      <div class="card" style="overflow:hidden;">
        <div style="padding:1rem 1.25rem;border-bottom:1px solid #e2e8f0;">
          <span style="font-size:0.9375rem;font-weight:600;">Estimates</span>
        </div>
        <table style="width:100%;border-collapse:collapse;font-size:0.8125rem;">
          <thead>
            <tr style="background:#f8fafc;border-bottom:1px solid #e2e8f0;">
              <th style="text-align:left;padding:0.625rem 1.25rem;color:#64748b;font-weight:500;">Estimate #</th>
              <th style="text-align:left;padding:0.625rem 1.25rem;color:#64748b;font-weight:500;">Date</th>
              <th style="text-align:left;padding:0.625rem 1.25rem;color:#64748b;font-weight:500;">Expires</th>
              <th style="text-align:left;padding:0.625rem 1.25rem;color:#64748b;font-weight:500;">Amount</th>
              <th style="text-align:left;padding:0.625rem 1.25rem;color:#64748b;font-weight:500;">Status</th>
              <th style="padding:0.625rem 1.25rem;"></th>
            </tr>
          </thead>
          <tbody>
            <tr style="border-bottom:1px solid #f1f5f9;cursor:pointer;" onmouseover="this.style.background='#f8fafc'" onmouseout="this.style.background=''" onclick="showView('detail')">
              <td style="padding:0.75rem 1.25rem;font-weight:600;">EST-001</td>
              <td style="padding:0.75rem 1.25rem;">Jan 15, 2026</td>
              <td style="padding:0.75rem 1.25rem;">Feb 15, 2026</td>
              <td style="padding:0.75rem 1.25rem;font-weight:600;">$425.00</td>
              <td style="padding:0.75rem 1.25rem;">
                <span style="font-size:0.6875rem;background:#fef3c7;color:#92400e;padding:2px 8px;border-radius:9999px;font-weight:600;">Sent</span>
              </td>
              <td style="padding:0.75rem 1.25rem;text-align:right;">
                <button onclick="event.stopPropagation();showView('detail')" style="background:none;border:none;color:#64748b;cursor:pointer;font-size:0.8125rem;">View</button>
              </td>
            </tr>
            <tr style="cursor:pointer;" onmouseover="this.style.background='#f8fafc'" onmouseout="this.style.background=''" onclick="showView('detail')">
              <td style="padding:0.75rem 1.25rem;font-weight:600;">EST-002</td>
              <td style="padding:0.75rem 1.25rem;">Jan 20, 2026</td>
              <td style="padding:0.75rem 1.25rem;">Feb 20, 2026</td>
              <td style="padding:0.75rem 1.25rem;font-weight:600;">$850.00</td>
              <td style="padding:0.75rem 1.25rem;">
                <span style="font-size:0.6875rem;background:#dcfce7;color:#166534;padding:2px 8px;border-radius:9999px;font-weight:600;">Approved</span>
              </td>
              <td style="padding:0.75rem 1.25rem;text-align:right;">
                <button onclick="event.stopPropagation();showView('detail')" style="background:none;border:none;color:#64748b;cursor:pointer;font-size:0.8125rem;">View</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Annotation -->
      <div style="border:2px dashed #3b82f6;background:#eff6ff;border-radius:0.5rem;padding:0.75rem;text-align:center;margin-top:1.5rem;">
        <p style="font-size:0.875rem;color:#1e40af;font-weight:600;margin:0;">Click any estimate row or "View" button to see the inline detail view &darr;</p>
        <p style="font-size:0.75rem;color:#3b82f6;margin:0.25rem 0 0;">No page navigation — stays inside the customer page</p>
      </div>
    </div>

    <!-- ========================= -->
    <!-- VIEW 2: INLINE ESTIMATE DETAIL -->
    <!-- ========================= -->
    <div id="view-detail" style="display:none;" class="fade-in">

      <!-- Back button + Estimate header -->
      <div style="background:white;border:1px solid #e2e8f0;border-radius:0.75rem;padding:1rem 1.25rem;margin-bottom:1rem;">
        <!-- Back link -->
        <div style="margin-bottom:0.75rem;">
          <a href="#" onclick="event.preventDefault();showView('list')" style="color:#64748b;font-size:0.8125rem;text-decoration:none;display:inline-flex;align-items:center;gap:0.375rem;">
            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
            Back to Estimates
          </a>
        </div>

        <!-- Customer + Status -->
        <div class="flex flex-wrap items-center justify-between gap-2 mb-1">
          <div class="flex items-center gap-2">
            <h2 style="font-size:1.125rem;font-weight:700;margin:0;">
              <a href="#" style="color:inherit;text-decoration:none;">John</a>
            </h2>
            <span style="display:inline-flex;align-items:center;gap:4px;font-size:0.6875rem;color:#16a34a;font-weight:600;background:#f0fdf4;padding:2px 8px;border-radius:9999px;">
              <span style="width:6px;height:6px;border-radius:50%;background:#16a34a;"></span>
              Opportunity
            </span>
          </div>
        </div>
        <div style="font-size:0.75rem;color:#64748b;display:flex;gap:1rem;margin-bottom:0.75rem;">
          <span>6029030482</span>
          <span>teachout05@gmail.com</span>
        </div>

        <!-- Estimate # + Actions -->
        <div class="flex flex-wrap items-center justify-between gap-3">
          <div class="flex items-center gap-3">
            <h1 style="font-size:1.25rem;font-weight:700;margin:0;">Estimate #EST-001</h1>
            <span style="font-size:0.6875rem;color:#64748b;">Jan 15, 2026</span>
          </div>
          <div class="flex items-center gap-2">
            <button class="ico-btn" title="Documents">
              <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
            </button>
            <button class="ico-btn" title="History">
              <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
            </button>
            <button class="ico-btn" title="Activity">
              <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
            </button>
            <button class="btn-sm btn-green">
              Book
              <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
            </button>
          </div>
        </div>
      </div>

      <!-- 3-Column Layout -->
      <div class="layout-3" style="display:grid;grid-template-columns:230px 1fr 280px;gap:1rem;align-items:start;">

        <!-- LEFT: Quote Info + Tasks -->
        <div style="display:flex;flex-direction:column;gap:1rem;">
          <div class="card card-pad">
            <div class="flex items-center justify-between mb-3">
              <span style="font-size:0.8125rem;font-weight:600;">Quote Info</span>
              <span style="font-size:0.6875rem;color:#16a34a;font-weight:500;">Opportunity</span>
            </div>
            <div class="fi"><span class="fi-label">Number</span><span style="font-weight:600;">EST-001</span></div>
            <div class="fi"><span class="fi-label">Type</span><select><option selected>Local</option><option>Long Distance</option></select></div>
            <div class="fi"><span class="fi-label">Source</span><select><option selected>Website</option><option>Referral</option></select></div>
            <div class="fi"><span class="fi-label">Sales</span><select><option selected>Daniela</option><option>Mike</option></select></div>
            <div class="fi"><span class="fi-label">Estimator</span><select><option selected>Unassigned</option></select></div>
            <div class="fi"><span class="fi-label">Tags</span><a href="#" style="color:#2563eb;font-size:0.8125rem;font-weight:500;">+</a></div>
            <div class="fi"><span class="fi-label">Lead Status</span><select><option selected>New</option><option>Contacted</option></select></div>
          </div>

          <div class="card card-pad">
            <div class="flex items-center justify-between mb-2">
              <span style="font-size:0.8125rem;font-weight:600;">Tasks</span>
              <a href="#" style="color:#2563eb;font-size:0.75rem;">+</a>
            </div>
            <p style="text-align:center;color:#94a3b8;font-size:0.75rem;padding:0.75rem 0;">No tasks yet</p>
          </div>
        </div>

        <!-- CENTER: Jobs + Stops + Notes -->
        <div style="display:flex;flex-direction:column;gap:1rem;">
          <!-- Jobs -->
          <div class="card card-pad">
            <div class="flex items-center justify-between mb-3">
              <span style="font-size:0.875rem;font-weight:600;">Jobs</span>
              <a href="#" style="color:#2563eb;font-size:0.75rem;">+ Add Job</a>
            </div>
            <div style="border:2px solid #16a34a;border-radius:0.5rem;padding:0.75rem;display:flex;flex-wrap:wrap;align-items:center;gap:0.75rem;">
              <div>
                <div style="font-size:0.6875rem;color:#64748b;">Job EST-001-1</div>
                <span style="font-size:0.625rem;background:#f1f5f9;padding:2px 6px;border-radius:3px;color:#64748b;">Unscheduled</span>
              </div>
              <span style="font-weight:600;font-size:0.875rem;margin-left:auto;">$425.00</span>
            </div>
          </div>

          <!-- Stops -->
          <div class="card card-pad">
            <div class="flex flex-wrap items-center gap-3 mb-3">
              <span style="font-size:0.875rem;font-weight:600;">Stops</span>
              <a href="#" style="color:#2563eb;font-size:0.75rem;">Map</a>
              <span style="font-size:0.6875rem;color:#64748b;"><b>RT</b> -- / --</span>
              <a href="#" style="color:#2563eb;font-size:0.75rem;margin-left:auto;">+</a>
            </div>
            <div style="display:flex;align-items:center;gap:0.75rem;padding:0.5rem 0;border-bottom:1px solid #f1f5f9;">
              <span class="sdot" style="background:#3b82f6;"></span>
              <span style="font-size:0.8125rem;color:#2563eb;font-weight:500;width:80px;">Origin</span>
              <span style="font-size:0.8125rem;">Phoenix, Arizona 85015</span>
            </div>
            <div style="display:flex;align-items:center;gap:0.75rem;padding:0.5rem 0;">
              <span class="sdot" style="background:#16a34a;"></span>
              <span style="font-size:0.8125rem;color:#2563eb;font-weight:500;width:80px;">Destination</span>
              <span style="font-size:0.8125rem;">Phoenix, Arizona 85041</span>
            </div>
          </div>

          <!-- Notes -->
          <div class="card">
            <div class="tabs-notes">
              <div class="tab-note on">Internal</div>
              <div class="tab-note">Customer</div>
              <div class="tab-note">Crew Notes</div>
              <div class="tab-note">Crew Feedback</div>
            </div>
            <div style="padding:1rem 1.25rem;">
              <textarea style="width:100%;min-height:120px;border:1px solid #e2e8f0;border-radius:0.5rem;padding:0.75rem;font-size:0.875rem;resize:vertical;">2 bedroom apartment, 1st floor to 2nd floor
no appliances, boxes and furniture only</textarea>
            </div>
          </div>
        </div>

        <!-- RIGHT: Resources + Type + Pricing -->
        <div style="display:flex;flex-direction:column;gap:1rem;">
          <!-- Resources -->
          <div class="card card-pad">
            <div style="font-size:0.8125rem;font-weight:600;margin-bottom:0.75rem;">Resources</div>
            <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:0.5rem;text-align:center;">
              <div style="background:#f8fafc;border-radius:0.375rem;padding:0.5rem;">
                <div style="font-size:0.625rem;color:#64748b;text-transform:uppercase;">Trucks</div>
                <div style="font-size:1rem;font-weight:700;">1</div>
              </div>
              <div style="background:#f8fafc;border-radius:0.375rem;padding:0.5rem;">
                <div style="font-size:0.625rem;color:#64748b;text-transform:uppercase;">Team</div>
                <div style="font-size:1rem;font-weight:700;">2</div>
              </div>
              <div style="background:#f8fafc;border-radius:0.375rem;padding:0.5rem;">
                <div style="font-size:0.625rem;color:#64748b;text-transform:uppercase;">Hours</div>
                <div style="font-size:1rem;font-weight:700;">2h</div>
              </div>
              <div style="background:#f0fdf4;border-radius:0.375rem;padding:0.5rem;">
                <div style="font-size:0.625rem;color:#16a34a;text-transform:uppercase;">Rate</div>
                <div style="font-size:1rem;font-weight:700;color:#16a34a;">$150/hr</div>
              </div>
            </div>
          </div>

          <!-- Estimate Type -->
          <div class="card card-pad">
            <div style="display:flex;justify-content:space-between;">
              <div>
                <div style="font-size:0.5625rem;color:#94a3b8;text-transform:uppercase;font-weight:600;">Estimate Type</div>
                <select style="border:none;background:none;font-size:0.8125rem;color:#2563eb;font-weight:500;cursor:pointer;padding:0;"><option selected>Hourly</option><option>Flat Rate</option></select>
              </div>
              <div style="text-align:right;">
                <div style="font-size:0.5625rem;color:#94a3b8;text-transform:uppercase;font-weight:600;">Binding Type</div>
                <select style="border:none;background:none;font-size:0.8125rem;color:#2563eb;font-weight:500;cursor:pointer;padding:0;"><option selected>Non-Binding</option><option>Binding</option></select>
              </div>
            </div>
          </div>

          <!-- Pricing -->
          <div class="card">
            <div class="card-pad">
              <div class="pr"><a href="#">Moving Services</a><span style="font-weight:500;">$300.00</span></div>
              <div class="pr"><a href="#">Materials</a><span class="dash">&mdash;</span></div>
              <div class="pr"><a href="#">Additional Services</a><span class="dash">&mdash;</span></div>
              <div class="pr"><a href="#">Trip Fee</a><span style="font-weight:500;">$125.00</span></div>
              <div style="border-top:1px solid #e2e8f0;margin:0.5rem 0;"></div>
              <div class="pr"><span style="font-weight:600;">Subtotal</span><span style="font-weight:600;">$425.00</span></div>
              <div class="pr"><a href="#">Sales Tax</a><span class="dash">&mdash;</span></div>
              <div style="border-top:1px solid #e2e8f0;margin:0.5rem 0;"></div>
              <div class="pr"><span style="font-weight:700;">Balance</span><span style="font-weight:700;">$425.00</span></div>
            </div>
            <div class="total-bar">
              <div style="display:flex;justify-content:space-between;font-size:0.8125rem;margin-bottom:0.25rem;">
                <span>Moving</span><span>$425.00</span>
              </div>
              <div style="display:flex;justify-content:space-between;align-items:baseline;">
                <span style="font-weight:600;">Estimated Price:</span>
                <span style="font-size:1.25rem;font-weight:700;">$425.00</span>
              </div>
            </div>
          </div>
        </div>

      </div>

      <!-- Annotation -->
      <div style="border:2px dashed #16a34a;background:#f0fdf4;border-radius:0.5rem;padding:0.75rem;text-align:center;margin-top:1.5rem;">
        <p style="font-size:0.875rem;color:#166534;font-weight:600;margin:0;">This is the full V3 estimate detail — rendered INLINE within the customer page</p>
        <p style="font-size:0.75rem;color:#16a34a;margin:0.25rem 0 0;">"Back to Estimates" returns to the list view above. No page navigation needed.</p>
      </div>
    </div>

  </div>

  <script>
    function showView(view) {
      document.getElementById('view-list').style.display = view === 'list' ? 'block' : 'none';
      document.getElementById('view-detail').style.display = view === 'detail' ? 'block' : 'none';
      // Re-trigger fade animation
      const el = document.getElementById('view-' + view);
      el.classList.remove('fade-in');
      void el.offsetWidth;
      el.classList.add('fade-in');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  </script>

</body>
</html>
